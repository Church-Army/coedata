---
title: "Reading CoE statistics"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Reading CoE statistics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(coedata)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_reading-coe-statistics.Rmd: do not edit by hand -->




The functions on this page are all used for reading 2021 ONS census data for Church of England geographies. You can:

-   View available datasets with `coe_census_datasets()`
-   Get census data at a level of your choosing with the general-purpose function `coe_census()`
    -   Get parish-level data with `coe_census_parish()`
    -   Get diocese-level data with `coe_census_diocese()`
    -   Get data for all of england with `coe_census_england()`
-   You can also compare a parish with its diocese and the whole of england in a single table with `coe_parish_snapshot()`

## View available data with `coe_census_datasets()`

`coe_census_datasets()` displays information on all the census datasets available through this package. By default, the function returns a two-column tibble including `ons_id` and `description`, but setting `description = FALSE` will return a character vector of all valid ONS ids that can be passed to functions such as `coe_census()`.

Parish-level datasets were produced by Ken Eames, Senior Statistical Researcher at the Church of England's Data Services team. The original datasets are available on the [Church of England website](https://www.churchofengland.org/about/data-services/resources-publications-and-data). This package uses data that were last updated November 2024. If you notice that the source data have since been updated, please create a Github issue at <https://github.com/Church-Army/coedata>

```{r examples-coe_census_datasets}
coe_census_datasets() |>
  dplyr::glimpse()
```


## Obtain census statistics for a parish, diocese, or the nation with `coe_census()`

Get statistics on a particular topic, for a particular geographical level, filtering as required. Levels include 'parish', 'diocese' or 'england'. Parishes can be filtered with parish codes and dioceses with diocese numbers, but national-level tables are comprised of a single row and cannot be filtered.

```{r examples-coe_census}
coe_census(ons_id =  "TS001", level = "england")
coe_census(ons_id = "TS001", level = "diocese", areas = 1)
```



## Obtain parish-level data with `coe_census_parish()`

A convenient wrapper around `coe_census()` for getting parish-level statistics for parishes of your choosing

```{r examples-coe_census_parish}
coe_census_parish(ons_id = "TS062", parish_codes = "350041", relative = TRUE)
```


## Obtain diocese-level data with `coe_census_diocese()`

A convenient wrapper around `coe_census()` for getting diocese-level statistics for dioceses of your choosing

```{r examples-coe_census_diocese}
coe_census_diocese(ons_id = "TS062", diocese_numbers = c(3, 7), relative = TRUE)
```


## Obtain data for all of England with `coe_census_england()`

A convenient wrapper around `coe_census()` for getting national-level stats for a topic of your choosing

```{r examples-coe_census_england}
coe_census_england(ons_id = "TS062", relative = TRUE)
```


## Compare a parish to it's diocesan and national context with `coe_parish_snapshot()`

Get a contextual 'snapshot' of any given parish for any number of census topics, comparing the parochial statistics with those of the diocese and the whole of England. A wrapper around `coe_census_parish()`, `coe_census_diocese()` and `coe_census_england()` to obtain relative statistics for each geography and combine them into a single table, iterating over census topics to return a list.

```{r examples-coe_parish_snapshot}
coe_parish_snapshot(parish_code = "370047", ons_ids = "TS001")
```




## Get deprivation data with `coe_parish_deprivation()`






```{r examples-coe_parish_deprivation}
coe_parish_deprivation()

## This is equivalent for convenience:
coe_parish_imd()
```


```{r dplyr_method}
## Print method
#' @export
print.coe_parish_data_imd <- function(x, ...){

  cat("Church of England Deprivation Data\n")

  NextMethod(x)

  if("parish_code" %in% names(x)) cat("Parish-level data compiled by the Church of England")
}

```

